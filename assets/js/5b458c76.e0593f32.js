"use strict";(self.webpackChunkmajulahsingapuri_github_io=self.webpackChunkmajulahsingapuri_github_io||[]).push([[3376],{3905:(e,t,a)=>{a.d(t,{Zo:()=>h,kt:()=>m});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},h=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,h=l(e,["components","mdxType","originalType","parentName"]),c=p(a),u=o,m=c["".concat(s,".").concat(u)]||c[u]||d[u]||i;return a?n.createElement(m,r(r({ref:t},h),{},{components:a})):n.createElement(m,r({ref:t},h))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:o,r[1]=l;for(var p=2;p<i;p++)r[p]=a[p];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},5910:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>h});var n=a(7462),o=(a(7294),a(3905)),i=a(9960);const r={id:"paylah2csv",title:"PayLah! eStatement Converter",description:"A simple appliction in PyScript that converts DBS PayLah! statements into CSV files",sidebar_position:3,sidebar_label:"PayLah2csv",keywords:["pyscript","data","csv","processing"],tags:["pyscript","project"],draft:!1},l=void 0,s={unversionedId:"Personal/paylah2csv/paylah2csv",id:"Personal/paylah2csv/paylah2csv",title:"PayLah! eStatement Converter",description:"A simple appliction in PyScript that converts DBS PayLah! statements into CSV files",source:"@site/docs/Personal/paylah2csv/index.mdx",sourceDirName:"Personal/paylah2csv",slug:"/Personal/paylah2csv/",permalink:"/projects/Personal/paylah2csv/",draft:!1,tags:[{label:"pyscript",permalink:"/projects/tags/pyscript"},{label:"project",permalink:"/projects/tags/project"}],version:"current",sidebarPosition:3,frontMatter:{id:"paylah2csv",title:"PayLah! eStatement Converter",description:"A simple appliction in PyScript that converts DBS PayLah! statements into CSV files",sidebar_position:3,sidebar_label:"PayLah2csv",keywords:["pyscript","data","csv","processing"],tags:["pyscript","project"],draft:!1},sidebar:"tutorialSidebar",previous:{title:"Queue-Stack",permalink:"/projects/Personal/queue-stack/"},next:{title:"NTU STARS",permalink:"/projects/School/mystars/"}},p={},h=[{value:"Introduction",id:"introduction",level:2},{value:"Python Everywhere",id:"python-everywhere",level:2},{value:"Simplicity",id:"simplicity",level:2},{value:"Algorithm",id:"algorithm",level:2},{value:"Two Pointer",id:"two-pointer",level:3},{value:"Challenges",id:"challenges",level:2},{value:"Wheels?",id:"wheels",level:3},{value:"Downloading the File",id:"downloading-the-file",level:3},{value:"Conclusion",id:"conclusion",level:2},{value:"Appendix",id:"appendix",level:2},{value:"A sample of <code>Pay</code>-ment platforms",id:"a-sample-of-pay-ment-platforms",level:3}],c={toc:h},d="wrapper";function u(e){let{components:t,...a}=e;return(0,o.kt)(d,(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)(i.Z,{className:"button button--primary",to:"https://majulahsingapuri.github.io/paylah2csv",mdxType:"Link"},"Try it out!"),(0,o.kt)(i.Z,{className:"button button--secondary margin-left--md",to:"https://github.com/majulahsingapuri/paylah2csv",mdxType:"Link"},"View the code"),(0,o.kt)("h2",{id:"introduction"},"Introduction"),(0,o.kt)("p",null,"Don't you just love it when companies provide features selectively?\nIf you're serious about your finances (or at least want to be), you probably have an army of applications that help you track every cent entering and leaving your myriad of accounts.\nPopular apps on the App Stores for doing this very mundane funtion have the same basic featureset."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Manually adding and removing transactions so you can cry over your net worth every day as you enter the (ever rising) price of cai png (",(0,o.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Economy_rice"},"Economy Rice")," for non-",(0,o.kt)("a",{parentName:"li",href:"https://en.wiktionary.org/wiki/Sinkie#:~:text=Noun,Somebody%20from%20Singapore%3B%20a%20Singaporean%2e"},"Sinkies"),") into the application.")),(0,o.kt)("p",null,"There are some apps with superhuman capabilities like ",(0,o.kt)("a",{parentName:"p",href:"https://seedly.sg"},"Seedly"),' that allow you to directly import your transaction data from your respective banks.\nSadly these apps cannot sync data from "wallets" (as opposed to "bank accounts") such as PayLah!\nAdditionally, they may even lack the ability to ',(0,o.kt)("a",{parentName:"p",href:"https://www.reddit.com/r/singaporefi/comments/or59ad/anyone_find_it_odd_that_you_can_export_a_csv_of/"},"export")," the transaction data to csv."),(0,o.kt)("p",null,"As we drown in the ever increasing avalanche of platforms/wallets with Pay in their name (seriously count them ",(0,o.kt)("a",{parentName:"p",href:"#appendix"},"all"),"), we must find a way to bring the personal accounting control back to the one app that has stood the test of time as the undisputed king of accounting."),(0,o.kt)("p",null,"Unfortunately it is not Numbers (sorry fellow Mac users we are still decades away from an actually usable spreadsheet app) but its ",(0,o.kt)("strong",{parentName:"p"},"clearly")," superior counterpart Excel."),(0,o.kt)("h2",{id:"python-everywhere"},"Python Everywhere"),(0,o.kt)("p",null,"As an avid user of Python (see my ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/majulahsingapuri/leetcode"},"leetcode solutions")," for proof), I am always on the lookout for new ways to use it in any way I can.\nI don't remember where I came across ",(0,o.kt)("a",{parentName:"p",href:"https://pyscript.net/"},"PyScript")," but I can swear I saw it on ",(0,o.kt)("a",{parentName:"p",href:"https://twitter.com/fireship_dev"},"Fireship"),"'s ",(0,o.kt)("a",{parentName:"p",href:"https://www.youtube.com/c/Fireship"},"YouTube")," channel as he is always talking about new frameworks.\nIf you do find the relevant video then please do ",(0,o.kt)("a",{parentName:"p",href:"https://twitter.com/majulasingapuri"},"X/Tweet/write-it-on-a-paper-plane-and-hope-it-lands-on-me")," me and I will forever be your grateful for proving that I have not lost my sanity."),(0,o.kt)("p",null,"Anyways, PyScript is a framework built on top of ",(0,o.kt)("a",{parentName:"p",href:"https://pyodide.org/en/stable/"},"Pyodide")," (that runs Python on your web browser) and inserts that code as HTML.\nThis allows you to directly interact your Python and HTML elements together and it seemed to me to be the perfect way to build this application to leverage all the great data science packages like ",(0,o.kt)("inlineCode",{parentName:"p"},"pandas")," and at the same time maintain the security of the user's data by not having a backend server/database that the file is uploaded to."),(0,o.kt)("h2",{id:"simplicity"},"Simplicity"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Simplify, then add lightness - Colin Chapman")),(0,o.kt)("p",null,"This application doesn't have much functionality other than literally taking a pdf and extracting it to be a csv.\nThe real challenge is that when trying to read the data, one cannot use OCR as each table row has 2 baselines.\nOne for the transaction name and another for the reference number."),(0,o.kt)("p",null,"The second challenge is rendering all the text using ",(0,o.kt)("inlineCode",{parentName:"p"},"pdfreader")," results in a object of type ",(0,o.kt)("inlineCode",{parentName:"p"},"list[str]"),", which also contains all the additional texts that are not in the table.\nSo finding the relevant section will require some leetcode knowledge."),(0,o.kt)("h2",{id:"algorithm"},"Algorithm"),(0,o.kt)("p",null,"The lucky thing about the way the ",(0,o.kt)("inlineCode",{parentName:"p"},"pdfreader")," read the document was that all the data that is supposed to be in a table was a contiguous block in the middle of the list of strings.\nThis essentially meant that all I had to do was to find the left and right bounds of the table and use some list comprehension to reshape it into a table."),(0,o.kt)("h3",{id:"two-pointer"},"Two Pointer"),(0,o.kt)("p",null,"These are a class ",(0,o.kt)("a",{parentName:"p",href:"https://leetcode.com/tag/two-pointers/"},"programming problems")," that make use of 2 pointers to find bounds or keep track of values in a close to linear ",(0,o.kt)("inlineCode",{parentName:"p"},"O(n)")," time.\nSince the data is all in the middle, all I had to do was to create a left and right pointer and just iterate from either end and find keywords that denote the start and end points."),(0,o.kt)("h2",{id:"challenges"},"Challenges"),(0,o.kt)("p",null,"Of course any project without significant challenges is no true project at all.\nHere are just a few that I had to tackle."),(0,o.kt)("h3",{id:"wheels"},"Wheels?"),(0,o.kt)("p",null,"Yes.\nWheels.\nBut not the kind that you're thinking.\nPython ships its packages as ",(0,o.kt)("inlineCode",{parentName:"p"},"*.tar.gz")," as well as ",(0,o.kt)("inlineCode",{parentName:"p"},".whl")," files.\nUnfortunately, PyScript only supports wheel installations through its ",(0,o.kt)("inlineCode",{parentName:"p"},"micropip")," installer and ",(0,o.kt)("inlineCode",{parentName:"p"},"pdfreader")," only ships ",(0,o.kt)("a",{parentName:"p",href:"https://pypi.org/project/pdfreader/#files"},"as a tarball")," \ud83d\ude22."),(0,o.kt)("p",null,"Referring to the ",(0,o.kt)("a",{parentName:"p",href:"https://pyodide.org/en/stable/usage/faq.html#why-can-t-micropip-find-a-pure-python-wheel-for-a-package"},"documentation"),", I could either ",(0,o.kt)("del",{parentName:"p"},"complain like the Singaporean I am")," raise an Issue on the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/maxpmaxp/pdfreader/"},"official repo")," or I could just follow the ",(0,o.kt)("a",{parentName:"p",href:"https://packaging.python.org/en/latest/tutorials/packaging-projects/#generating-distribution-archives"},"instructions")," and somehow build and ship the wheel myself."),(0,o.kt)("p",null,"So that's just what I did."),(0,o.kt)("p",null,"Surprisingly it was just as easy as cloning the repo, running some commands and presto the wheel is generated."),(0,o.kt)("h3",{id:"downloading-the-file"},"Downloading the File"),(0,o.kt)("p",null,"For someone that has been making websites for a while, you might think that it would be easy to get a file to download.\nBut since this is all written in Python and that is a whole other animal, it took some Googling and fiddling with some ",(0,o.kt)("a",{parentName:"p",href:"https://pyscript.recipes/basic/file-download/"},"tutorials")," to finally get it to work.\nPhew!"),(0,o.kt)("h2",{id:"conclusion"},"Conclusion"),(0,o.kt)("p",null,"That's about it!\nJust a short, simple and frankly very useful project that took just as much time to create as it took me to write this post (and I can't believe that that is the case).\nI hope that people actually use it and love it!"),(0,o.kt)("h2",{id:"appendix"},"Appendix"),(0,o.kt)("h3",{id:"a-sample-of-pay-ment-platforms"},"A sample of ",(0,o.kt)("inlineCode",{parentName:"h3"},"Pay"),"-ment platforms"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"PayNow (the best and IMO the only one we need)"),(0,o.kt)("li",{parentName:"ol"},"PayLah!"),(0,o.kt)("li",{parentName:"ol"},"PayAnyone"),(0,o.kt)("li",{parentName:"ol"},"FavePay"),(0,o.kt)("li",{parentName:"ol"},"ShopeePay"),(0,o.kt)("li",{parentName:"ol"},"AliPay"),(0,o.kt)("li",{parentName:"ol"},"Apple Pay"),(0,o.kt)("li",{parentName:"ol"},"Google Pay"),(0,o.kt)("li",{parentName:"ol"},"Samsung Pay"),(0,o.kt)("li",{parentName:"ol"},"Grab Pay"),(0,o.kt)("li",{parentName:"ol"},"NETS Pay"),(0,o.kt)("li",{parentName:"ol"},"WeChat Pay")))}u.isMDXComponent=!0}}]);