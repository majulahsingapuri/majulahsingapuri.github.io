"use strict";(self.webpackChunkmajulahsingapuri_github_io=self.webpackChunkmajulahsingapuri_github_io||[]).push([[8527],{5906:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>s,default:()=>c,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var a=n(4848),i=n(8453);const o={title:"Side Quest: An Auth System for Django Ninja",description:"A REST Authentication System for the Django Ninja Framework",slug:"django-ninja-auth",tags:["backend","django","django-ninja","authentication","python"],keywords:["backend","python","django","django-ninja","auth","authentication","REST","JWT","cookies","session","github"],image:"https://github.com/majulahsingapuri.png",hide_table_of_contents:!1,draft:!1,authors:"bhargav"},s=void 0,r={permalink:"/blog/django-ninja-auth",source:"@site/blog/2023/12/12/django-ninja-auth/index.md",title:"Side Quest: An Auth System for Django Ninja",description:"A REST Authentication System for the Django Ninja Framework",date:"2023-12-12T00:00:00.000Z",tags:[{inline:!0,label:"backend",permalink:"/blog/tags/backend"},{inline:!0,label:"django",permalink:"/blog/tags/django"},{inline:!0,label:"django-ninja",permalink:"/blog/tags/django-ninja"},{inline:!0,label:"authentication",permalink:"/blog/tags/authentication"},{inline:!0,label:"python",permalink:"/blog/tags/python"}],readingTime:3.225,hasTruncateMarker:!0,authors:[{name:"Bhargav Singapuri",title:"SWE and Data Scientist",url:"https://github.com/majulahsingapuri",imageURL:"https://github.com/majulahsingapuri.png",key:"bhargav"}],frontMatter:{title:"Side Quest: An Auth System for Django Ninja",description:"A REST Authentication System for the Django Ninja Framework",slug:"django-ninja-auth",tags:["backend","django","django-ninja","authentication","python"],keywords:["backend","python","django","django-ninja","auth","authentication","REST","JWT","cookies","session","github"],image:"https://github.com/majulahsingapuri.png",hide_table_of_contents:!1,draft:!1,authors:"bhargav"},unlisted:!1,nextItem:{title:"Personal Expenses Pt. 3",permalink:"/blog/personal-expenses-pt-3"}},h={authorsImageUrls:[void 0]},d=[{value:"Why Start a New Project",id:"why-start-a-new-project",level:2},{value:"Why Django-Ninja-JWT",id:"why-django-ninja-jwt",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Goal",id:"goal",level:2},{value:"What You can Do",id:"what-you-can-do",level:2}];function l(e){const t={a:"a",code:"code",h2:"h2",img:"img",p:"p",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"Creating the perfect (imo at least) REST authentication system for Django Ninja"}),"\n",(0,a.jsx)(t.p,{children:"Hello one and all and welcome back to another update!\nI hope you are all having a wonderful holiday season."}),"\n",(0,a.jsx)(t.h2,{id:"why-start-a-new-project",children:"Why Start a New Project"}),"\n",(0,a.jsxs)(t.p,{children:["In the process of creating my auth server, I have decided to do a little side quest and expand upon an ",(0,a.jsx)(t.a,{href:"https://eadwincode.github.io/django-ninja-jwt/",children:"exisiting library"})," for authentication in Django Ninja REST framework called ",(0,a.jsx)(t.code,{children:"django-ninja-jwt"}),".\nWhy would I do such a thing?\nIsn't there already too much on my plate that I have to go and add on a new project?"]}),"\n",(0,a.jsx)(t.p,{children:"Firstly, yes.\nI do have too many projects on my plate, considering that an auth server is just the first step in the process.\nI still have to create the whole personal finance app, or whatever I end up creating in the end.\nBut at the same time, I personally have been pretty frustrated with the lack of REST authentication options for Django Ninja.\nYes, the base library provides a decent start for Session, Cookie and token authentication, it is not as robust as Django REST Framework."}),"\n",(0,a.jsx)(t.h2,{id:"why-django-ninja-jwt",children:"Why Django-Ninja-JWT"}),"\n",(0,a.jsxs)(t.p,{children:["The library that I ended up forking does provide great support for JWT authentication but does not support any other kinds of cookie authentication.\nBut what it did have is a great system for customisations to the controllers and schemas as well as a working JWT authentication system that is symmetric to ",(0,a.jsx)(t.a,{href:"https://github.com/iMerica/dj-rest-auth",children:"Django REST Auth"}),".\nHence, all I had to do was to port over the Token Authentication capability from DRA and add in the basic session authentication functionality and we are golden."]}),"\n",(0,a.jsx)(t.p,{children:"While I did remove some of the functionality from the JWT part of the project, namely the token blacklisting and routers for simplicity's sake, it is not difficult to re-incorporate it back into the project.\nThe key thing was to ensure that it had compatibility with Pydantic's v2 API while maintianing the same functionality."}),"\n",(0,a.jsxs)(t.p,{children:["What I also liked from the DRA and Ninja JWT libraries is that there sub-apps that extend the base app's functionality.\nFor DRA it is the ",(0,a.jsx)(t.code,{children:"authtoken"})," app and for Ninja JWT it is the ",(0,a.jsx)(t.code,{children:"blacklist"})," app.\nThis means that all I have to do is to keep the core authentication logic in the main app and add any other logic like checking of tokens and creating refresh endpoints in sub-apps.\nThis ensures that there is a top-down hierarchy and developers only use what they need."]}),"\n",(0,a.jsxs)(t.p,{children:["What I ended up with is the ",(0,a.jsx)(t.a,{href:"https://pypi.org/project/dj-ninja-auth/",children:"following"})," library."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"dj-ninja-auth project page",src:n(6449).A+"",width:"1146",height:"655"})}),"\n",(0,a.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsxs)(t.p,{children:["Using an email and password for authentication is so old school.\nWhere is the good stuff? We need social authentication and since security is also important, we need to add in MFA.\nLuckily, ",(0,a.jsx)(t.a,{href:"https://github.com/pennersr/django-allauth/tree/main",children:"Allauth"})," already provides these functionalities, albeit for apps that are fully managed by Django rather than being on the REST architecture.\nThis means that there will have to be some tweaking and bodging that has to be done in order to allow this to work properly."]}),"\n",(0,a.jsx)(t.h2,{id:"goal",children:"Goal"}),"\n",(0,a.jsx)(t.p,{children:"At the end of the day, my goal for this project is for it to be a fully fledged authentication system that provides support for all kinds of authentication, be it username/password or social and with MFA support built on JWTs or rotating Auth tokens."}),"\n",(0,a.jsx)(t.h2,{id:"what-you-can-do",children:"What You can Do"}),"\n",(0,a.jsx)(t.p,{children:"Every open source project needs time and manpower to keep up to date.\nThis repository is already 2 departed from the original SimpleJWT library and me being the only contributor will take considerable effort on my end.\nIf you find this library useful, want to get started with open source or think there are ways that I can improve the code (workflows, actions, tests) then do feel free to create PRs and help expand this project."}),"\n",(0,a.jsx)(t.p,{children:"Thank you for your time and I hope you learnt something!"})]})}function c(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},6449:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/dj-ninja-auth-project-page-3ab6f93d6ebcbe6adcf1fbbd60113693.png"},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var a=n(6540);const i={},o=a.createContext(i);function s(e){const t=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);