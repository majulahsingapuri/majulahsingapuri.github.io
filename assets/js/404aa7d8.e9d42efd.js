"use strict";(self.webpackChunkmajulahsingapuri_github_io=self.webpackChunkmajulahsingapuri_github_io||[]).push([[5266],{5980:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var i=n(4848),a=n(8453);const o={id:"social",title:"Setup Social Authentication",description:"How to setup Social Authentication with Allauth in dj-ninja-auth",sidebar_position:2,sidebar_label:"Social Authentication",keywords:["social","dj-ninja-auth"],image:"https://github.com/majulahsingapuri.png",tags:["dj-ninja-auth"],draft:!1},r=void 0,s={id:"allauth/social",title:"Setup Social Authentication",description:"How to setup Social Authentication with Allauth in dj-ninja-auth",source:"@site/ninja-auth/allauth/social.md",sourceDirName:"allauth",slug:"/allauth/social",permalink:"/ninja-auth/allauth/social",draft:!1,unlisted:!1,tags:[{inline:!0,label:"dj-ninja-auth",permalink:"/ninja-auth/tags/dj-ninja-auth"}],version:"current",sidebarPosition:2,frontMatter:{id:"social",title:"Setup Social Authentication",description:"How to setup Social Authentication with Allauth in dj-ninja-auth",sidebar_position:2,sidebar_label:"Social Authentication",keywords:["social","dj-ninja-auth"],image:"https://github.com/majulahsingapuri.png",tags:["dj-ninja-auth"],draft:!1},sidebar:"tutorialSidebar",previous:{title:"Setup",permalink:"/ninja-auth/allauth/allauth-setup"},next:{title:"Schemas",permalink:"/ninja-auth/customisation/schema"}},l={},c=[];function u(e){const t={a:"a",code:"code",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["Social Authentication requires that you set up a ",(0,i.jsx)(t.a,{href:"/ninja-auth/authentication/session#csrf-endpoint",children:"CSRF endpoint"})," and enable CSRF in your Django-Ninja as this is required by ",(0,i.jsx)(t.code,{children:"allauth"}),"'s authentication endpoints."]}),"\n",(0,i.jsxs)(t.p,{children:["You will then have to register your app in the ",(0,i.jsx)(t.code,{children:"admin"})," console. Do remember to add the provdier to the ",(0,i.jsx)(t.code,{children:"INSTALLED_APPS"})," else your provider will not show up in the admin console."]}),"\n",(0,i.jsxs)(t.p,{children:["The next step is to set up your ",(0,i.jsx)(t.code,{children:"urls.py"})," file so that the registered providers' urls are available.\nTo do so, add the following to your ",(0,i.jsx)(t.code,{children:"urls.py"}),".\nYou can use any url prefix.\nI chose to use the ",(0,i.jsx)(t.code,{children:"social/"})," prefix for ease of use and to deconflict it with the ",(0,i.jsx)(t.code,{children:"account/"})," url in the ",(0,i.jsx)(t.code,{children:"NinjaAuthAccountController"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",metastring:'title="urls.py"',children:'from django.contrib import admin\nfrom django.urls import include, path\n\nfrom .api import api\n\nfrom allauth.urls import provider_urlpatterns # <-----\n\nurlpatterns = [\n    path("admin/", admin.site.urls),\n    path("social/", include(provider_urlpatterns)), # <-----\n    path("", api.urls),\n]\n'})}),"\n",(0,i.jsxs)(t.p,{children:["After getting your CSRF token, setting up your ",(0,i.jsx)(t.code,{children:"url.py"})," and registering your ",(0,i.jsx)(t.code,{children:"SocialApplication"}),", you have to send a ",(0,i.jsx)(t.code,{children:"X-WWW-FORM-URLENCODED"})," form to your desired provider's login endpoint.\nA sample request is provided below."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"curl --location 'http://127.0.0.1:8000/social/<PROVIDER>/login/' \\\n--header 'Cookie: csrftoken=<CSRF_TOKEN_VALUE>' \\\n--header 'Content-Type: application/x-www-form-urlencoded' \\\n--data-urlencode 'csrfmiddlewaretoken=<CSRF_TOKEN_VALUE>'\n"})}),"\n",(0,i.jsx)(t.p,{children:"The callback url for this request will be"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-text",children:"http://127.0.0.1:8000/social/<PROVIDER>/login/callback/\n"})})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>s});var i=n(6540);const a={},o=i.createContext(a);function r(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);