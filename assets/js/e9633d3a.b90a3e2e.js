"use strict";(self.webpackChunkmajulahsingapuri_github_io=self.webpackChunkmajulahsingapuri_github_io||[]).push([[8289],{5284:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var r=e(4848),o=e(8453);const a={id:"controller",title:"Controllers",description:"How to customise controllers in dj-ninja-auth",sidebar_position:2,sidebar_label:"Controllers",keywords:["controller","dj-ninja-auth"],image:"https://github.com/majulahsingapuri.png",tags:["dj-ninja-auth"],draft:!1},i=void 0,s={id:"customisation/controller",title:"Controllers",description:"How to customise controllers in dj-ninja-auth",source:"@site/ninja-auth/customisation/controller.md",sourceDirName:"customisation",slug:"/customisation/controller",permalink:"/ninja-auth/customisation/controller",draft:!1,unlisted:!1,tags:[{inline:!0,label:"dj-ninja-auth",permalink:"/ninja-auth/tags/dj-ninja-auth"}],version:"current",sidebarPosition:2,frontMatter:{id:"controller",title:"Controllers",description:"How to customise controllers in dj-ninja-auth",sidebar_position:2,sidebar_label:"Controllers",keywords:["controller","dj-ninja-auth"],image:"https://github.com/majulahsingapuri.png",tags:["dj-ninja-auth"],draft:!1},sidebar:"tutorialSidebar",previous:{title:"Schemas",permalink:"/ninja-auth/customisation/schema"},next:{title:"Base",permalink:"/ninja-auth/settings/base"}},l={},c=[];function u(t){const n={a:"a",code:"code",p:"p",pre:"pre",...(0,o.R)(),...t.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Say you wanted to add another endpoint to the default auth controller that is an authenticated route and returns the user's details in the schema defined ",(0,r.jsx)(n.a,{href:"/ninja-auth/customisation/schema",children:"previously"}),".\nIn your ",(0,r.jsx)(n.code,{children:"controller.py"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="controller.py"',children:'from ninja_extra import ControllerBase, api_controller, http_get\nfrom ninja_extra.permissions import IsAuthenticated\n\nfrom .schema import MyAuthUserSchema\n\nclass UserController(ControllerBase):\n    auto_import = False\n\n    @http_get(\n        "/me",\n        permissions=[IsAuthenticated],\n        response={200: MyAuthUserSchema},\n        url_name="get_user",\n    )\n    def get_user(self):\n        return MyAuthUserSchema(user=self.context.request.auth)\n\n@api_controller("/auth", permissions=[AllowAny], tags=["auth"])\nclass MyNinjaAuthController(\n    AuthenticationController,\n    PasswordResetController,\n    PasswordChangeController,\n    UserController\n):\n    auto_import = False\n\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Then in your ",(0,r.jsx)(n.code,{children:"api.py"}),", replace the default controller with your custom controller"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="api.py"',children:"from ninja_extra import NinjaExtraAPI\nfrom .controller import MyNinjaAuthController\n\napi = NinjaExtraAPI()\napi.register_controllers(MyNinjaAuthController)\n"})})]})}function h(t={}){const{wrapper:n}={...(0,o.R)(),...t.components};return n?(0,r.jsx)(n,{...t,children:(0,r.jsx)(u,{...t})}):u(t)}},8453:(t,n,e)=>{e.d(n,{R:()=>i,x:()=>s});var r=e(6540);const o={},a=r.createContext(o);function i(t){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof t?t(n):{...n,...t}}),[n,t])}function s(t){let n;return n=t.disableParentContext?"function"==typeof t.components?t.components(o):t.components||o:i(t.components),r.createElement(a.Provider,{value:n},t.children)}}}]);